{% extends "layouts/admin.html" %}

{% set pageName="Schools" %}
{% set currentSection="schools" %}

{% set numberOfSchools = schools.length %}

{% if numberOfSchools < 12 %}
  {% set numberOfSchools = schools.length %} 
{% endif %}

{% set filters = req.session.data.filters %}

{% block beforeContent %}
{% endblock %}
 
{% block content %}



  
<h1 class="govuk-heading-xl">{{ pageName }} ({{ numberOfSchools }})</h1>






  {{data.schools | log}}

 

      {% include "_includes/search-form.njk" %}


      {% if schools.length %}
        <div class="school-list">
          {% for school in schools %}
            <div class="school-list__item">
              <h2 class="govuk-heading-s">
                <a href="/admin/schools/{{ school.id }}">
                  {{ school.name }}
                </a>
              </h2>

              
              {{ govukTag({
                text: school.programmeType,
                classes: "govuk-tag-programme",
                classes: school.programmeType | statusColour 
              }) }}

              {{ govukSummaryList({
                classes: "govuk-summary-list--no-border govuk-summary-list-schools",
                rows: [
                  {
                    key: {
                      text: "URN"
                    },
                    value: {
                      text: school.id
                    }
                  },
                  {
                    key: {
                      text: "Induction tutor email"
                    },
                    value: {
                      text: school.inductionTutorEmail
                    }
                  }
                ]
              }) }}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>There are no results.</p>
      {% endif %}


    
  
{% endblock %}

{% block scripts %}
  {{super()}}
  <script>
    new AppFrontend.FilterToggleButton({
      bigModeMediaQuery: '(min-width: 48.063em)',
      startHidden: false,
      toggleButton: {
        container: $('.app-action-bar__filter'),
        showText: 'Show filter',
        hideText: 'Hide filter',
        classes: 'govuk-button--secondary govuk-!-margin-bottom-3'
      },
      closeButton: {
        container: $('.app-filter__header-action'),
        text: 'Close'
      },
      filter: {
        container: $('.app-filter-layout__filter')
      }
    })
  </script>
{% endblock %}